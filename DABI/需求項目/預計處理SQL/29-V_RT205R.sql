CREATE VIEW V_RT205R AS 
SELECT A.*, B.ENTRYNO, B.IOBOUND, C.CODENC AS NM_IOBOUND, B.ADDUSR, D.NAME, B.ADDDAT, B.MEMO AS MEMOADD FROM (select a.workno, a.linkno, g.comtype, l.CODENC, b.codenc as worktype, isnull(c.shortnc, d.name) as assigneng , isnull(i.shortnc, f.name) as finisheng, h.comn, g.faqman, e.name as sndwrkusr, a.sndwrkdat, j.name as finishsur, k.codenc AS FINISH_NM, a.canceldat , G.CUSID, G.RCVDAT, G.COMQ1, G.LINEQ1, m.LINERATE, m.idslamip, m.gateway, m.CUSTIP, m.CASEKIND, m.secondcase, m.raddr, m.docketdat, m.duedat, m.contacttel+'/'+m.companytel as tel, m.cusnc, a.FINISHDAT, g.FAQREASON, n.CODENC as faqreasonnm, g.MEMO, m.CMTYIP, m.strbillingdat, m.dropdat, m.overdue, m.WtlApplyDat, m.paycycle, m.paytype, m.freecode, m.comtypenc, left((select LINEIP + ',' from RTLessorAVSCmtyLine where COMQ1=G.COMQ1 for XML PATH('')),len((select LINEIP + ',' from RTLessorAVSCmtyLine where COMQ1=G.COMQ1 for XML PATH('')))-1) as PP, m.SPEED from RTSndWork a left outer join RTCode b on b.code = a.worktype and b.kind ='P6' left outer join RTObj c on c.cusid = a.assigncons left outer join RTEmployee d on d.emply = a.assigneng left outer join RTEmployee e on e.emply = a.sndwrkusr left outer join RTEmployee j on j.emply = a.finishusr left outer join RTEmployee f on f.emply = a.finisheng left outer join RTObj i on i.cusid = a.finishcons left outer join RTFaqM g on g.caseno = a.linkno  left outer join HBAdslCmty h on g.comtype = h.comtype and g.comq1 = h.comq1 and g.lineq1 = h.lineq1 left outer join RTCode k on k.code = a.finishtyp and k.kind ='P9' left outer join RTCode l on l.CODE = g.COMTYPE and l.kind ='P5' left outer join V_RT205 m on m.COMQ1=g.COMQ1 and m.LINEQ1=g.LINEQ1 and m.CUSID=g.CUSID left outer join RTCode n on n.CODE = g.FAQREASON and n.kind ='P7' where (a.worktype ='01' or a.worktype ='09') ) A LEFT OUTER JOIN RTFaqAdd B ON B.CASENO=A.LINKNO LEFT OUTER JOIN RTCODE C ON C.KIND='P8' AND C.CODE=B.IOBOUND left outer join RTEmployee d on d.emply = B.ADDUSR